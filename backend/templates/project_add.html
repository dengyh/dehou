{% extends "backend_base.html" %}

{% block style %}
    <!-- ueditor编辑器js与css -->
    {{ form.media }}
{% endblock %}
{% block title1 %}添加工程应用{% endblock %}
{% block title2 %}添加工程应用{% endblock %}
{% block title3 %}添加工程应用{% endblock %}
{% block titleBase %}工程应用管理{% endblock %}
{% block titleBaseUrl %}project_list{% endblock %}
{% block content %}
    <!-- 添加工程应用板块 开始 -->
    <section id="main" class="column">
        <div class="clear"></div>
        <article class="module width_full add_item_block">
            <form method="post" name="form" enctype="multipart/form-data">
                {% csrf_token %}
                <header>
                    <h3 class="form_title">添加工程应用</h3>
                </header>
                <div class="module_content">
                    <fieldset style="width:30%;float:left;margin-bottom:20px;">
                        <label>标题</label>
                        <input type="text" name="title" class="title" style="height:25px;">
                    </fieldset>
                    <fieldset style="width:30%;float:left;clear:both;margin-bottom:20px;">
                        <label>产品描述</label>
                        <input type="text" name="remark" class="title" style="height:25px;">
                    </fieldset>
                    <fieldset style="width:30%;float:left;clear:both;margin-bottom:20px;">
                        <label>封面图片</label>
                        <input type="file" name="img" class="title" style="display:none;" />
                        <input type="button" value="上传图片" class="clear_btn" style="margin-left:-100px;" id="uploadBtn">
                    </fieldset>
                   
                     <fieldset style="width:30%; float:left;clear:both;margin-bottom:20px;"
                     class="parentMenu">
                        <label>类型选择</label>
                        <select name="p_id" style="width:92%;height:25px;" class="contentsType" id="parentMenu">
                            {% for list in product_nav %}
                            <option value="{{list.id}}">{{list.name}}</option>
                             {% endfor %}
                        </select>                       
                    </fieldset>
                   
                    <fieldset style="width:30%; float:left;margin-left:10px;margin-bottom:20px;" class="secondMenu">
                        <label>类型选择</label>
                        <select name="s_id" style="width:92%;height:25px;" class="contentsType" id="secondMenu">
                             {% for list in product_second_nav %}
                            <option value="{{list.id}}">{{list.name}}</option>
                             {% endfor %}                           
                        </select>                       
                    </fieldset>

                    <fieldset style="width:30%;float:left;margin-left:10px;margin-bottom:20px;" class="thirdMenu">
                        <label>类型选择</label>
                        <select name="t_id" style="width:92%;height:25px;" class="contentsType" id="thirdMenu">
                             {% for list in product_third_nav %}
                            <option value="{{list.id}}">{{list.name}}</option>
                             {% endfor %} 
                        </select>                       
                    </fieldset>

                    <fieldset style="clear:both;margin-bottom:20px;">
                        <label>内容</label>
                        <div style="padding:0 10px;">{{ form }}</div>
                    </fieldset>
                </div>
                <footer>
                    <div class="submit_link">
                        <input type="submit" value="提交" class="alt_btn">
                        <input type="button" value="清空" class="clear_btn">
                    </div>
                </footer>
            </form>
        </article>
        <div class="spacer"></div>
    </section>
    <!-- 添加工程应用板块 结束 -->

    <!-- js 开始 -->
    <script type="text/javascript">
    $(document).ready(function() {
        // 上传封面图片事件
        $('#uploadBtn').click(function(){
            $("input[name='img']").trigger("click");
        });

        // 文本框内容不为空
        $('.alt_btn').click(function(){
            var ue = UE.getEditor('id_content');
            ue.ready(function() {
                if (ue.getContent().length <= 0) {
                    alert("内容不能为空！");
                    return false;
                }
                
                form.action = "/backend/pro_add_handle/";
            });
        });

        // 文本置空
        $('.clear_btn').click(function() {
            var ue = UE.getEditor('id_content');
            ue.ready(function() {
                if (confirm("确定要清空文本内容吗？")) {
                    ue.setContent('');
                }
            });
        });
    });
    </script>
    <!-- js 结束 -->
{% endblock %}